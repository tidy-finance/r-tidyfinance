% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helper_functions_data_manipulation.R
\name{crsp_adjust_prices}
\alias{crsp_adjust_prices}
\title{Calculate Adjusted Prices from CRSP Alternative Price Data}
\usage{
crsp_adjust_prices(data)
}
\arguments{
\item{data}{A data frame containing CRSP stock price data with the following
columns:
\describe{
\item{\code{altprc}}{Alternative price (negative bid/ask average or closing price)}
\item{\code{cfacpr}}{Cumulative adjustment factor for prices}
}}
}
\value{
The input data frame with an additional column:
\describe{
\item{\code{prc_adj}}{Adjusted price, calculated as |altprc| / cfacpr}
}
Zero values in \code{altprc} are treated as missing, and infinite values in
\code{prc_adj} are converted to \code{NA}.
}
\description{
Computes adjusted prices using the CRSP alternative price (\code{altprc}) and the
cumulative adjustment factor for prices (\code{cfacpr}). The alternative price is
typically the average of bid and ask when the closing price is not available.
}
\examples{
library(tidyfinance)

# Example with CRSP-like data
crsp_data <- data.frame(
  permno = c(10001, 10001, 10001),
  date = as.Date(c("2020-01-01", "2020-01-02", "2020-01-03")),
  altprc = c(-25.50, 30.00, 0),  # Negative when bid/ask average
  cfacpr = c(1.0, 1.0, 1.0)
)

crsp_data |> crsp_adjust_prices()
}
